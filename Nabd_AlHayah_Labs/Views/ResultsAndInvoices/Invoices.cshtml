@model List<Nabd_AlHayah_Labs.ViewModels.InvoiceViewModel>

<div class="app-wrapper">
    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">
            <h1 class="mb-4 text-primary"><i class="fas fa-file-invoice-dollar me-2"></i>Invoices for @ViewBag.PatientName</h1>

            <a asp-action="Index" class="btn btn-outline-secondary mb-4">
                <i class="fas fa-arrow-left me-1"></i> Back to Patients
            </a>

            @foreach (var invoice in Model)
            {
                <div class="card shadow-lg mb-4 border-primary">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-receipt me-2"></i>Invoice @invoice.VisM_Seq - @invoice.VisM_No</h5>
                        <small>@invoice.VisM_DateFormatted</small>
                    </div>
                    <div class="card-body">
                        <div class="row mb-2">
                            <div class="col-md-6">
                                <p><strong>Patient No:</strong> @invoice.Pat_No</p>
                                <p><strong>Doctor:</strong> @invoice.Doc_Name</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>Total:</strong> <span class="text-success">@invoice.VisM_Total.ToString("C")</span></p>
                                <p><strong>Discount:</strong> <span class="text-warning">@invoice.VisM_Discount.ToString("C")</span></p>
                                <p><strong>Amount To Pay:</strong> <span class="text-primary fw-bold">@invoice.VisM_AmountToPay.ToString("C")</span></p>
                                <p><strong>Remain:</strong> <span class="text-danger">@invoice.VisM_Remain.ToString("C")</span></p>
                            </div>
                        </div>
                        <div class="text-end">
                            <a href="@Url.Action("DownloadInvoice", "Patients", new { patientId = invoice.Pat_No, visMNo = invoice.VisM_No })" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-download me-1"></i> Download PDF
                            </a>
                            <a href="#" class="btn btn-sm btn-outline-success">
                                <i class="fas fa-print me-1"></i> Print
                            </a>
                        </div>
                    </div>
                </div>
            }

        </div>
    </div>
</div>
